<div class="preloader">
    <div class="lds-ripple">
        <div class="lds-pos"></div>
        <div class="lds-pos"></div>
    </div>
</div>
<hr class="mt-0">
<div class="row">
    <div class="col">
        <div class="card border border-info rounded">
            <div class="card-header bg-info text-white rounded-top font-weight-bold">
                Buscar predios vacunados
            </div>
            <form ngNativeValidate [formGroup]="formularioBusqueda" class="form-horizontal r-separator" (ngSubmit)="buscar()">
                    <div class="card-body">
                        <div class="form-group row align-items-center mb-0">
                            <label class="col-md-3 text-right control-label col-form-label">Parámetro de consulta</label>
                            <div class="col-md-9 border-left pb-2 pt-2">
                                <input type="radio" value="cedula" id="cedula" name="inputTipoConsulta" formControlName="inputTipoConsulta" (change)="cambiarTipoConsulta()" class="material-inputs radio-col-blue">
                                <label for="cedula"> Identificación productor </label>
                            
                                &nbsp; &nbsp; &nbsp;
                            
                                <input type="radio" value="cuv" id="cuv" name="inputTipoConsulta" formControlName="inputTipoConsulta" (change)="cambiarTipoConsulta()" class="material-inputs radio-col-blue">
                                <label for="cuv"> Certificado Vacunación </label>
                                <div class="invalid-feedback d-block" *ngIf="formularioBusqueda.controls.inputTipoConsulta.errors?.required && formularioBusqueda.touched">
                                    Seleccione el tipo de consulta
                                </div>
                            </div>
                        </div>
                        <div class="form-group row align-items-center mb-0">
                                <label class="col-md-3 text-right control-label col-form-label">Fase Vacunación</label>
                                <div class="col-md-9 border-left pb-2 pt-2">
                                    <select formControlName="fase_vacunacion" class="form-control border-secondary" (change)="cambioFaseVacunacion()">
                                        <option [value]="null" selected disabled>Seleccione un fase de vacunación</option>
                                        <option *ngFor="let fase of listaFasesVacunaciones" [value]="fase.idFaseVacunacion" >{{ fase.nombre}}</option>
                                    </select>
                                </div>
                        </div>
                        <div *ngIf="!tipoCUV" class="form-group row align-items-center mb-0">
                            <label class="col-md-3 text-right control-label col-form-label">Número de Identificación</label>
                            <div class="col-md-9 border-left pb-2 pt-2">
                                <input type="text" class="form-control border-secondary" formControlName="identificacion" placeholder="C.C/C.I/RUC/Pasaporte">
                            </div>
                        </div>
                        <div *ngIf="tipoCUV" class="form-group row align-items-center mb-0">
                            <label class="col-md-3 text-right control-label col-form-label">Número de CUV</label>
                            <div class="col-md-9 border-left pb-2 pt-2">
                                <input type="text" class="form-control border-secondary" formControlName="numero_cuv" placeholder="# de certificado de vacunación">
                            </div>
                        </div>
                        <div class="form-group row align-items-center mb-0">
                            <label class="col-md-3 text-right control-label col-form-label">Predios vacunados</label>
                            <div class="col-md-9 border-left pb-2 pt-2">
                                <select formControlName="certificado" class="form-control border-secondary" (change)="cambioCertificado()">
                                    <option [value]="null" selected disabled>Seleccione un predio</option>
                                    <option *ngFor="let certificado of listaCertificadosVacunacion" [value]="certificado.idCertificadoVacunacion" >{{ certificado.nombrePredio }} - # CUV: {{ certificado.secuencia }}</option>
                                </select>
                            </div>
                        </div>
                    </div>
                    <div class="card-body">
                        <div class="form-group mb-0 text-right">
                            <button type="submit" class="btn btn-info waves-effect waves-light">
                                <span class="btn-label">
                                    <i class="fas fa-search"></i>
                                </span>
                                Buscar
                            </button>
                        </div>
                    </div>
            </form>
        </div>
    </div>
</div>
<div class="row" >
    <div class="col">
        <div class="card border border-secondary rounded">
            <div class="card-header bg-secondary rounded-top font-weight-bold">
                <h4 class=" mb-0 text-white">
                    Detalles del predio vacunado
                </h4>
            </div>
            <form ngNativeValidate [formGroup]="formularioDetalleCertificado"  class="form-horizontal r-separator">
                <div class="card-body">

                    <table *ngIf="op == 1" style="background-color:#EEEEEE; color:black; font-size: small; font-weight:bold; text-align: center; padding: 5px; border-radius: 20px;" class="table mt-3 table-borderless v-middle">
                        <tbody>
                            <tr>
                                <td></td>
                                <td class="pl-0 text-left">OPERADORA:</td>
                                <td class="pl-0 text-left font-weight-medium">{{ formularioDetalleCertificado.value.operadora.toUpperCase() }}</td>
                                <td class="pl-0 text-left"><u># CERTIFICADO:</u></td>
                                <td class="pl-0 text-left font-weight-medium">{{ formularioDetalleCertificado.value.secuencia }}</td>
                                
                                <td></td>
                            </tr>
                            <tr>
                                <td></td>
                                <td class="pl-0 text-left">OFICINA:</td>
                                <td class="pl-0 text-left font-weight-medium">{{ formularioDetalleCertificado.value.oficina.toUpperCase() }}</td>
                                <td class="pl-0 text-left"><u>PREDIO:</u></td>
                                <td class="pl-0 text-left font-weight-medium">{{ formularioDetalleCertificado.value.predio.toUpperCase() }} [{{ formularioDetalleCertificado.value.codigo_sitio.toUpperCase() }}]</td>
                                <td></td>
                            </tr>
                            <tr>
                                <td></td>
                                <td class="pl-0 text-left">BRIGADISTA:</td>
                                <td class="pl-0 text-left font-weight-medium">{{ formularioDetalleCertificado.value.brigadista.toUpperCase() }}</td>
                                <td class="pl-0 text-left"><u>PROVINCIA:</u></td>
                                <td class="pl-0 text-left font-weight-medium">{{ formularioDetalleCertificado.value.provincia.toUpperCase() }}</td>
                                <td></td>
                            </tr>
                            <tr>
                                <td></td>
                                <td class="pl-0 text-left">FECHA VACUNACIÓN:</td>
                                <td class="pl-0 text-left font-weight-medium">{{ formularioDetalleCertificado.value.fecha }}</td>
                                <td class="pl-0 text-left"><u>CANTÓN:</u></td>
                                <td class="pl-0 text-left font-weight-medium">{{ formularioDetalleCertificado.value.canton.toUpperCase() }}</td>
                                <td></td>
                            </tr>
                            <tr>
                                <td></td>
                                <td class="pl-0 text-left">LOTE VACUNA:</td>
                                <td class="pl-0 text-left font-weight-medium">{{ formularioDetalleCertificado.value.lote.toUpperCase() }}</td>
                                <td class="pl-0 text-left"><u>PARROQUIA:</u></td>
                                <td class="pl-0 text-left font-weight-medium">{{ formularioDetalleCertificado.value.parroquia.toUpperCase() }}</td>
                                <td></td>
                            </tr>
                            <tr>
                                <td></td>
                                <td class="pl-0 text-left">PRODUCTOR:</td>
                                <td class="pl-0 text-left font-weight-medium">{{ formularioDetalleCertificado.value.productor.toUpperCase() }}</td>
                                <td class="pl-0 text-left"><u>SITIO/VÍA:</u></td>
                                <td class="pl-0 text-left font-weight-medium">{{ formularioDetalleCertificado.value.sitio_via.toUpperCase() }}</td>
                                <td></td>
                            </tr>
                            <tr>
                                <td></td>
                                <td class="pl-0 text-left">DOCUMENTO:</td>
                                <td><button class="btn btn-warning waves-effect waves-light" type="button" (click)="descargarCertificadoVacunacion(formularioDetalleCertificado.value.id_certificado)"> <span><i class="fas fa-download"></i></span> </button></td>
                                <td class="pl-0 text-left"><u>FECHA DE CARGA:</u></td>
                                <td class="pl-0 text-left font-weight-medium">{{ formularioDetalleCertificado.value.fecha_carga }}</td>
                                <td></td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <div class="card-body">
                    <div class="row">
                        <table class="table mt-3 table-borderless v-middle">
                            <thead>
                                <tr>
                                    <th></th>
                                    <th class="pl-0 text-center"><img width="50" src="assets/images/icon/vaca.svg" alt="Income" /></th>
                                    <th></th>
                                    <th class="pl-0 text-center"><img width="50" src="assets/images/icon/toro.svg" alt="Income" /></th>
                                    <th></th>
                                    <th></th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td></td>
                                    <td class="pl-0 text-left">Terneras:</td>
                                    <td class="pl-0 text-left">{{ formularioDetalleCertificado.value.terneras }}</td>
                                    <td class="pl-0 text-left">Terneros:</td>
                                    <td class="pl-0 text-left">{{ formularioDetalleCertificado.value.terneros }}</td>
                                    <td></td>
                                </tr>
                                <tr>
                                    <td></td>
                                    <td class="pl-0 text-left">Vaconas:</td>
                                    <td class="pl-0 text-left">{{ formularioDetalleCertificado.value.vaconas }}</td>
                                    <td class="pl-0 text-left">Toretes:</td>
                                    <td class="pl-0 text-left">{{ formularioDetalleCertificado.value.toretes }}</td>
                                    <td></td>
                                </tr>
                                <tr>
                                    <td></td>
                                    <td class="pl-0 text-left">Vacas:</td>
                                    <td class="pl-0 text-left">{{ formularioDetalleCertificado.value.vacas }}</td>
                                    <td class="pl-0 text-left">Toros:</td>
                                    <td class="pl-0 text-left">{{ formularioDetalleCertificado.value.toros }}</td>
                                    <td></td>
                                </tr>
                                <tr>
                                    <td></td>
                                    <td class="pl-0 text-left">Búfalo Hembra:</td>
                                    <td class="pl-0 text-left">{{ formularioDetalleCertificado.value.bufalos_hembras }}</td>
                                    <td class="pl-0 text-left">Búfalo Macho:</td>
                                    <td class="pl-0 text-left">{{ formularioDetalleCertificado.value.bufalos_machos }}</td>
                                    <td></td>
                                </tr>
                            </tbody>
                            <tfoot>
                                <tr class="table-secondary">
                                    <td class=" pl-0 font-weight-bold text-center">Total</td>
                                    <td class="pl-0 text-left font-weight-bold"> </td>
                                    <td class="pl-0 text-left font-weight-bold"> 
                                        {{ 
                                            formularioDetalleCertificado.value.terneras + 
                                            formularioDetalleCertificado.value.vaconas +
                                            formularioDetalleCertificado.value.vacas +
                                            formularioDetalleCertificado.value.bufalos_hembras  
                                        }}
                                    </td>
                                    <td class="pl-0 text-left font-weight-bold"> </td>
                                    <td class="pl-0 text-left font-weight-bold">
                                         {{ 
                                            formularioDetalleCertificado.value.terneros +
                                            formularioDetalleCertificado.value.toretes +
                                            formularioDetalleCertificado.value.toros +
                                            formularioDetalleCertificado.value.bufalos_machos 
                                         }}
                                    </td>
                                    <td class="pl-0 text-left font-weight-bold">
                                        <span class="round rounded-circle text-white d-inline-block text-center bg-danger"> 
                                            {{ 
                                                formularioDetalleCertificado.value.terneras + 
                                                formularioDetalleCertificado.value.vaconas +
                                                formularioDetalleCertificado.value.vacas +
                                                formularioDetalleCertificado.value.bufalos_hembras +
                                                formularioDetalleCertificado.value.terneros +
                                                formularioDetalleCertificado.value.toretes +
                                                formularioDetalleCertificado.value.toros +
                                                formularioDetalleCertificado.value.bufalos_machos
                                             }} 
                                        </span>
                                    </td>
                                </tr>
                            </tfoot>
                        </table>
                    </div>
                </div>

            </form>
        </div>
    </div>
</div>
<app-visor-pdf>
</app-visor-pdf>