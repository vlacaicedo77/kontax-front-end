<!-- ============================================================== -->
<!-- Preloader - style you can find in spinners.css -->
<!-- ============================================================== -->
<div class="preloader">
    <div class="lds-ripple">
        <div class="lds-pos"></div>
        <div class="lds-pos"></div>
    </div>
</div>
<hr class="mt-0">
<form ngNativeValidate [formGroup]="formulario" (ngSubmit)="registrarCambio()" class="form-horizontal r-separator" *ngIf="servicioUsuario.usuarioInterno">
    <!-- Título -->
    <div class="card border border-info rounded">
        <div class="card-header bg-info text-white rounded-top">
            Cambio de dominio de bovinos
        </div>
        <div class="card-body">
            <div class="card-body">
                <div class="form-group mb-0 text-center">
                    <button type="submit" class="btn btn-info waves-effect waves-light">Transferir</button>
                </div>
            </div>

        </div>
    </div>
    <div class="row">
        <!-- Origen -->
        <div class="col">
            <div class="card border border-info rounded">
                <div class="card-header bg-info text-white rounded-top">
                    Propietario origen
                </div>
                <div class="card-body">
                    <div class="form-group row align-items-center mb-0">
                        <label class="col-md-3 text-right control-label col-form-label">CC/CI/RUC</label>
                        <div class="col-md-9 border-left pb-2 pt-2 input-group">
                            <input type="text" class="form-control" #ciPropietario placeholder="CC/CI/RUC">
                            <div class="input-group-append">
                                <button type="button" class="btn btn-success" (click)="buscarPropietario(ciPropietario.value)"><i class="ti-search"></i></button>
                            </div>
                        </div>
                    </div>
                    <div class="form-group row align-items-center mb-0">
                        <label class="col-md-3 text-right control-label col-form-label">Propietario</label>
                        <div class="col-md-9 border-left pb-2 pt-2 input-group">
                            <select formControlName="propietario" class="form-control" (change)="cambioPropietario()">
                                <option [value]="null" selected disabled>Seleccione un productor origen</option>
                                <option *ngFor="let usuario of listaPropietarios" [value]="usuario.idUsuariosExternos" >{{ usuario.nombres }}</option>
                            </select>
                            <div class="invalid-feedback d-block" *ngIf="formulario.controls.propietario.errors?.required && formulario.touched">
                                Seleccione productor origen
                            </div>
                        </div>
                    </div>
                    <!--<div class="form-group row align-items-center mb-0">
                        <label class="col-md-3 text-right control-label col-form-label">CI/RUC</label>
                        <div class="col-md-9 border-left pb-2 pt-2 input-group">
                            <p class="form-control">
                                {{ usuarioPropietarioActualSeleccionado?.numeroIdentificacion }}
                            </p>
                        </div>
                    </div>
                    <div class="form-group row align-items-center mb-0">
                        <label class="col-md-3 text-right control-label col-form-label">Razón social</label>
                        <div class="col-md-9 border-left pb-2 pt-2 input-group">
                            <p class="form-control">
                                {{ usuarioPropietarioActualSeleccionado?.razonSocial }}
                            </p>
                        </div>
                    </div>
                    <div class="form-group row align-items-center mb-0">
                        <label class="col-md-3 text-right control-label col-form-label">Apellidos y apellidos / Razón Social</label>
                        <div class="col-md-9 border-left pb-2 pt-2 input-group">
                            <p class="form-control">
                                {{ usuarioPropietarioActualSeleccionado?.nombres }}
                            </p>
                        </div>
                    </div>-->
                    <div class="form-group row align-items-center mb-0">
                        <label class="col-md-3 text-right control-label col-form-label">Predio origen</label>
                        <div class="col-md-9 border-left pb-2 pt-2 input-group">
                            <select class="form-control" formControlName="area_origen" (change)="cambioPredioOrigen()">
                                <option [value]="null" selected disabled>Seleccione un predio origen</option>
                                <option *ngFor="let area of listaAreasOrigen" [value]="area.idArea">{{ area.nombreProvinciaSitio.toUpperCase()}} - {{ area.nombreCantonSitio.toUpperCase()}} | {{ area.nombreSitio }}</option>
                                <!--<option *ngFor="let area of listaAreasOrigen" [value]="area.idArea">{{ area.nombre }}-{{ area.nombreSitio }} ( {{ area.nombreParroquiaSitio }} - {{ area.nombreCantonSitio }} - {{ area.nombreProvinciaSitio }}) </option>-->
                            </select>
                            <div class="invalid-feedback d-block" *ngIf="formulario.controls.area_origen.errors?.required && formulario.touched">
                                Seleccione un predio origen
                            </div>
                        </div>
                    </div>
                    <div class="form-group row align-items-center mb-0">
                        <label class="col-md-3 text-right control-label col-form-label">Categoría</label>
                        <div class="col-md-9 border-left pb-2 pt-2 input-group">
                            <!--<select class="form-control" formControlName="area_origen" (change)="cambioPredioOrigen()">
                                <option [value]="null" selected disabled>Seleccione un predio origen</option>
                                <option *ngFor="let area of listaAreasOrigen" [value]="area.idArea">{{ area.nombre }}-{{ area.nombreSitio }} ( {{ area.nombreParroquiaSitio }} - {{ area.nombreCantonSitio }} - {{ area.nombreProvinciaSitio }}) </option>
                            </select>-->
                            <select class="form-control" formControlName="categoria" (change)="BuscarBovinosOrigen()">
                                <option [value]="null" selected disabled>Seleccione categoría</option>
                                <option [value]="-1" selected enabled>Todas</option>
                                <option *ngFor="let categoria of categorias" [ngValue]="categoria.id_categoria" > {{ categoria.nombre }} </option>
                            </select>
                        </div>
                    </div>
                </div>
                <div class="card-header bg-info text-white">
                    <span class="font-weight-bold">
                        Bovinos disponibles
                    </span>
                    <span class="round rounded-circle text-white d-inline-block text-center bg-warning">{{ listaBovinosDisponibles.length }}</span>
                    <div class="btn-group ml-2" role="group" aria-label="Navegar" >
                        <button (click)="anterior()" type="button" class="btn btn-success"  *ngIf="inicio > 0"><i class="fa fa-fast-backward" ></i></button>
                        <!--button type="button" class="btn btn-success"><i class="fa fa-play"></i></button-->
                        <button (click)="siguiente()" type="button" class="btn btn-success"  *ngIf="listaBovinosDisponibles.length > 0"><i class="fa fa-fast-forward"></i></button>
                    </div>
                </div>
                <div class="card-body p-1">
                    <div class="table-wrapper-scroll-y custom-scrollbar">
                        <table class="table table-bordered table-hover">
                            <thead class="bg-primary text-white">
                                <tr>
                                    <th>Datos del animal</th>
                                    <th>Ubicación</th>
                                    <th></th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr *ngFor="let bovino of listaBovinosDisponibles">
                                    <td>
                                        <p><span class="font-weight-bold"># Ticket: </span> {{ bovino.idBovino }} </p>
                                        <p *ngIf="bovino.idCategoria"><span class="font-weight-bold">Categoría: </span> {{ bovino.nombreCategoria }} </p>
                                        <p><span class="font-weight-bold">Sexo: </span> {{ bovino.nombreSexo }} </p>
                                        <p><span class="font-weight-bold">Especie: </span> {{ bovino.nombreComunTaxonomia }} </p>
                                        <p *ngIf="bovino.codigoIdentificacion"><span class="font-weight-bold">Identificación oficial: </span> {{ bovino.codigoIdentificacion }} </p>
                                        <p *ngIf="bovino.registroNacimientoProvisional"><span class="font-weight-bold">RNP: </span> {{ bovino.registroNacimientoProvisional }} </p>
                                        <p *ngIf="bovino.registroNacimientoDefinitivo"><span class="font-weight-bold">RND: </span> {{ bovino.registroNacimientoDefinitivo }} </p>
                                        <p *ngIf="bovino.tatuaje"><span class="font-weight-bold">Tatuaje: </span> {{ bovino.tatuaje }} </p>
                                        <p *ngIf="bovino.marca"><span class="font-weight-bold">Marca: </span> {{ bovino.marca }} </p>
                                    </td>
                                    <td>
                                        <p><span class="font-weight-bold">Provincia: </span> {{ bovino.nombreProvinciaActual }} </p>
                                        <p><span class="font-weight-bold">Cantón: </span> {{ bovino.nombreCantonActual }} </p>
                                        <p><span class="font-weight-bold">Parroquia: </span> {{ bovino.nombreParroquiaActual }} </p>
                                        <p><span class="font-weight-bold">Predio: </span> {{ bovino.nombreAreaActual }} </p>
                                    </td>
                                    
                                    <td>
                                        <button type="button" (click)="agregarBovino(bovino.idBovino)" class="btn btn-primary btn-circle" ><li class="fas fa-arrow-right"></li></button>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
        <!-- Destino -->
        <div class="col">
            <div class="card border border-megna rounded">
                <div class="card-header bg-megna text-white rounded-top">
                    Propietario destino
                </div>
                <div class="card-body">
                    <div class="form-group row align-items-center mb-0">
                        <label class="col-md-3 text-right control-label col-form-label">CC/CI/RUC</label>
                        <div class="col-md-9 border-left pb-2 pt-2 input-group">
                            <input type="text" class="form-control" #ciDestinatario placeholder="CI/RUC">
                            <div class="input-group-append">
                                <button type="button" class="btn btn-success" (click)="buscarDestinatario(ciDestinatario.value)"><i class="ti-search"></i></button>
                            </div>
                        </div>
                    </div>
                    <div class="form-group row align-items-center mb-0">
                        <label class="col-md-3 text-right control-label col-form-label">Propietario</label>
                        <div class="col-md-9 border-left pb-2 pt-2 input-group">
                            <select formControlName="destinatario" class="form-control" (change)="cambioDestinatario()">
                                <option [value]="null" selected disabled>Seleccione un productor destinatario</option>
                                <option *ngFor="let usuario of listaDestinatarios" [value]="usuario.idUsuariosExternos" >{{ usuario.nombres }}</option>
                            </select>
                            <div class="invalid-feedback d-block" *ngIf="formulario.controls.destinatario.errors?.required && formulario.touched">
                                Seleccione un destinatario
                            </div>
                        </div>
                    </div>
                    <!--<div class="form-group row align-items-center mb-0">
                        <label class="col-md-3 text-right control-label col-form-label">CI/RUC</label>
                        <div class="col-md-9 border-left pb-2 pt-2 input-group">
                            <p class="form-control">
                                {{ usuarioPropietarioNuevoSeleccionado?.numeroIdentificacion }}
                            </p>
                        </div>
                    </div>
                    <div class="form-group row align-items-center mb-0">
                        <label class="col-md-3 text-right control-label col-form-label">Razón social</label>
                        <div class="col-md-9 border-left pb-2 pt-2 input-group">
                            <p class="form-control">
                                {{ usuarioPropietarioNuevoSeleccionado?.razonSocial }}
                            </p>
                        </div>
                    </div>
                    <div class="form-group row align-items-center mb-0">
                        <label class="col-md-3 text-right control-label col-form-label">Nombres y apellidos</label>
                        <div class="col-md-9 border-left pb-2 pt-2 input-group">
                            <p class="form-control">
                                {{ usuarioPropietarioNuevoSeleccionado?.nombres }} {{ usuarioPropietarioNuevoSeleccionado?.apellidos}}
                            </p>
                        </div>
                    </div>-->
                    <div class="form-group row align-items-center mb-0">
                        <label class="col-md-3 text-right control-label col-form-label">Predio destino</label>
                        <div class="col-md-9 border-left pb-2 pt-2 input-group">
                            <select class="form-control" formControlName="area_destino">
                                <option [value]="null" selected disabled>Seleccione un predio destino</option>
                                <!--<option *ngFor="let area of listaAreasDestinos" [value]="area.idArea">{{ area.nombre }}-{{ area.nombreSitio }} ( {{ area.nombreParroquiaSitio }} - {{ area.nombreCantonSitio }} - {{ area.nombreProvinciaSitio }}) </option>-->
                                <option *ngFor="let area of listaAreasDestinos" [value]="area.idArea">{{ area.nombreProvinciaSitio.toUpperCase()}} - {{ area.nombreCantonSitio.toUpperCase()}} | {{ area.nombreSitio }}</option>
                            </select>
                        </div>
                    </div>
                    <div class="form-group row align-items-center mb-0">
                        <label class="col-md-3 text-right control-label col-form-label">Categoría</label>
                        <div class="col-md-9 border-left pb-2 pt-2 input-group">
                            <select class="form-control" formControlName="categoriaD">
                                <option [value]="-1" selected disabled>Todas</option>
                            </select>
                        </div>
                    </div>
                </div>
                <div class="card-header bg-megna text-white">
                    <span class="font-weight-bold">
                        Bovinos seleccionados
                    </span>
                    <span class="round rounded-circle text-white d-inline-block text-center bg-warning">{{ listaBovinosAgregados.length }}</span>
                </div>
                <div class="card-body p-1">
                    <div class="table-wrapper-scroll-y custom-scrollbar">
                        <table class="table table-bordered table-hover">
                            <thead class="bg-primary text-white">
                                <tr>
                                    <th>Datos del animal</th>
                                    <th>Ubicación</th>
                                    <th></th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr *ngFor="let bovino of listaBovinosAgregados">
                                    <td>
                                        <p><span class="font-weight-bold"># Ticket: </span> {{ bovino.idBovino }} </p>
                                        <p *ngIf="bovino.idCategoria"><span class="font-weight-bold">Categoría: </span> {{ bovino.nombreCategoria }} </p>
                                        <p><span class="font-weight-bold">Sexo: </span> {{ bovino.nombreSexo }} </p>
                                        <p><span class="font-weight-bold">Especie: </span> {{ bovino.nombreComunTaxonomia }} </p>
                                        <p *ngIf="bovino.codigoIdentificacion"><span class="font-weight-bold">Identificación oficial: </span> {{ bovino.codigoIdentificacion }} </p>
                                        <p *ngIf="bovino.registroNacimientoProvisional"><span class="font-weight-bold">RNP: </span> {{ bovino.registroNacimientoProvisional }} </p>
                                        <p *ngIf="bovino.registroNacimientoDefinitivo"><span class="font-weight-bold">RND: </span> {{ bovino.registroNacimientoDefinitivo }} </p>
                                        <p *ngIf="bovino.tatuaje"><span class="font-weight-bold">Tatuaje: </span> {{ bovino.tatuaje }} </p>
                                        <p *ngIf="bovino.marca"><span class="font-weight-bold">Marca: </span> {{ bovino.marca }} </p>
                                    </td>
                                    <td>
                                        <p><span class="font-weight-bold">Provincia: </span> {{ bovino.nombreProvinciaActual }} </p>
                                        <p><span class="font-weight-bold">Cantón: </span> {{ bovino.nombreCantonActual }} </p>
                                        <p><span class="font-weight-bold">Parroquia: </span> {{ bovino.nombreParroquiaActual }} </p>
                                        <p><span class="font-weight-bold">Predio: </span> {{ bovino.nombreAreaActual }} </p>
                                    </td>
                                    
                                    <td>
                                        <button type="button" (click)="quitarBovino(bovino.idBovino)" class="btn btn-primary btn-circle" ><li class="fas fa-trash"></li></button>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>
</form>